## 開発を始める前に {#before}

### レスポンスXMLのデータ構造について {#xml}

JSONを使われる方は流して読む程度で構いませんが、XMLを使おうと考えている方は注意して読んで頂ければと思います。
駅すぱあとWebサービスでは後方互換性を保って機能追加が行われていますが、互換性維持のために幾つかのポイントを意識する必要があります。

特に重要なのが、要素の取得についてです。
要素は表す内容に対してユニークですが、階層や全体のデータの中でユニークなわけではありません。
例えばStation要素は駅を表しますが、全体のデータ構造に対して、あらたに駅を表現する必要があれば、今までなかった階層や親要素の子要素として出現する可能性があります。
つまり、現時点でのデータ構造のみを前提とした相対パスでの実装は大きな危険を伴います。
同じStationでも親子関係における文脈の意味が強くでるため、必ず絶対パスで取得するようにしてください。
XMLを利用する際には、XMLパーサを利用することが多いかと思いますが、DOMでパースしてXPATHを利用する際には手軽に相対パスで取得できてしまうため、注意が必要です。

### 課金の対象を知る {#charge}

フリープランをご利用いただく場合は読み飛ばしていただいて構いません。

スタンダードプランでは、多くのAPIが用意されていますが、その中にも課金対象となるものとそうでないものがあります。
意図せず無駄な課金が発生してしまい、想定していたよりも費用が掛かってしまうのは望むところではありません。
特に良くあるのが、「[アプリケーションを作ってみよう](/docs/app.md)」の項にもある駅の入力補助をインクリメンタルサーチで実装するケースです。
実装には駅情報API(/station)を用いるように見えますが、駅情報API(/station)は課金対象です。
コール数が多くなるインクリメンタルサーチに利用するのは現実的ではありません。
そのために課金対象外のAPIとして駅簡易情報API(/station/light)を用意しています。
駅簡易情報API(/station/light)は駅情報API(/station)のサブセットのような扱いになっており、駅の座標等を持っていないので課金対象外となっています。
インクリメンタルサーチの結果に必要なのは名称やコードなのでこのような実装には駅簡易情報API(/station/light)で十分です。
駅簡易情報API(/station/light)以外にも経路を検索するまでに必要な操作は基本的に課金対象外として用意してありますので、結果を得る過程で不要な課金を避けることができます。

いかがでしょうか？他にも注意点はありますが、全てドキュメント[^1]に記載されていますので開発を始める際にはご一読ください。

## 脚注

[^1]: 利用上の注意 http://docs.ekispert.com/v1/get-started/attention/
